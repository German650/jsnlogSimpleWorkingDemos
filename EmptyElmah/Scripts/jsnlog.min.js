var __extends=this.__extends||function(b,c){function g(){this.constructor=b}for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);g.prototype=c.prototype;b.prototype=new g};function JL(b){if(!b)return JL.__;var c="";return("."+b).split(".").reduce(function(b,d){var e=b["__"+d];c=c?c+("."+d):d;void 0===e&&(JL.Logger.prototype=b,e=new JL.Logger(c),b["__"+d]=e);return e},JL.__)}
(function(b){function c(a,b,c){void 0!==b[a]&&(null===b[a]?delete c[a]:c[a]=b[a])}function g(a){if(null!=b.enabled&&!b.enabled)return!1;try{if(a.userAgentRegex&&!RegExp(a.userAgentRegex).test(navigator.userAgent))return!1}catch(c){}try{if(a.ipRegex&&b.clientIP&&!RegExp(a.ipRegex).test(b.clientIP))return!1}catch(j){}return!0}b.enabled;b.clientIP;b.requestId;b.setOptions=function(a){c("enabled",a,this);c("clientIP",a,this);c("requestId",a,this);return this};b.getAllLevel=function(){return-2147483648};
b.getTraceLevel=function(){return 1E3};b.getDebugLevel=function(){return 2E3};b.getInfoLevel=function(){return 3E3};b.getWarnLevel=function(){return 4E3};b.getErrorLevel=function(){return 5E3};b.getFatalLevel=function(){return 6E3};b.getOffLevel=function(){return 2147483647};var d;d=function(a,b,c,d){this.l=a;this.m=b;this.n=c;this.t=d};b.LogItem=d;var e=function(a,c){this.appenderName=a;this.sendLogItems=c;this.level=b.getTraceLevel();this.sendWithBufferLevel=2147483647;this.storeInBufferLevel=-2147483648;
this.bufferSize=0;this.batchSize=1;this.buffer=[];this.batchBuffer=[]};e.prototype.setOptions=function(a){c("level",a,this);c("ipRegex",a,this);c("userAgentRegex",a,this);c("sendWithBufferLevel",a,this);c("storeInBufferLevel",a,this);c("bufferSize",a,this);c("batchSize",a,this);this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize);return this};e.prototype.log=function(a,b,c){g(this)&&!(a<this.storeInBufferLevel)&&(b=new d(a,b,c,(new Date).getTime()),a<this.level?0<this.bufferSize&&
(this.buffer.push(b),this.buffer.length>this.bufferSize&&this.buffer.shift()):(!(a<this.sendWithBufferLevel)&&this.buffer.length&&(this.batchBuffer=this.batchBuffer.concat(this.buffer),this.buffer.length=0),this.batchBuffer.push(b),this.batchBuffer.length>=this.batchSize&&this.sendBatch()))};e.prototype.sendBatch=function(){0!=this.batchBuffer.length&&(this.sendLogItems(this.batchBuffer),this.batchBuffer.length=0)};b.Appender=e;var i,h=function(a){e.call(this,a,h.prototype.sendLogItemsAjax);this.url=
"jsnlog.logger"};__extends(h,e);h.prototype.setOptions=function(a){c("url",a,this);e.prototype.setOptions.call(this,a);return this};h.prototype.sendLogItemsAjax=function(a){try{var c=JSON.stringify({r:b.requestId,lg:a}),d=new XMLHttpRequest;d.open("POST",this.url);d.setRequestHeader("Content-Type","application/json");d.send(c)}catch(e){}};i=h;b.AjaxAppender=i;var f=function(a){this.loggerName=a};f.prototype.setOptions=function(a){c("level",a,this);c("userAgentRegex",a,this);c("ipRegex",a,this);c("appenders",
a,this);return this};f.prototype.log=function(a,b){var c=0;if(this.appenders){if(a>=this.level&&g(this))for(c=this.appenders.length-1;0<=c;)this.appenders[c].log(a,b,this.loggerName),c--;return this}};f.prototype.trace=function(a){return this.log(1E3,a)};f.prototype.debug=function(a){return this.log(2E3,a)};f.prototype.info=function(a){return this.log(3E3,a)};f.prototype.warn=function(a){return this.log(4E3,a)};f.prototype.error=function(a){return this.log(5E3,a)};f.prototype.fatal=function(a){return this.log(6E3,
a)};b.Logger=f;f=new i("");b.__=new b.Logger("");b.__.setOptions({level:b.getDebugLevel(),appenders:[f]});b.createAjaxAppender=function(a){return new i(a)}})(JL||(JL={}));
